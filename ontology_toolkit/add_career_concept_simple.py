#!/usr/bin/env python3
"""
–ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–Ω—è—Ç–∏—è "–ö–∞—Ä—å–µ—Ä–Ω—ã–π –∫–æ–Ω—Ü–µ–ø—Ç"
"""

from pathlib import Path
from ontology_toolkit.core.ontology import Ontology
from ontology_toolkit.core.schema import MetaMetaType, RelationType

print("üöÄ –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–Ω—è—Ç–∏–µ '–ö–∞—Ä—å–µ—Ä–Ω—ã–π –∫–æ–Ω—Ü–µ–ø—Ç'\n")

# 1. –û—Ç–∫—Ä—ã–≤–∞–µ–º –æ–Ω—Ç–æ–ª–æ–≥–∏—é
onto_path = Path(__file__).parent / ".ontology_demo"
onto = Ontology(onto_path)
onto.load_all()

print(f"üìÇ –û–Ω—Ç–æ–ª–æ–≥–∏—è: {onto_path}")
print(f"   –¢–µ–∫—É—â–∏—Ö –ø–æ–Ω—è—Ç–∏–π: {len(onto.index.by_id)}\n")

# 2. –°–æ–∑–¥–∞—ë–º –ø–æ–Ω—è—Ç–∏–µ
concept = onto.add_concept("–ö–∞—Ä—å–µ—Ä–Ω—ã–π –∫–æ–Ω—Ü–µ–ø—Ç")

# 3. –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª—è
concept.definition = """–ö–∞—Ä—å–µ—Ä–Ω—ã–π –∫–æ–Ω—Ü–µ–ø—Ç ‚Äî —ç—Ç–æ –º—ã—Å–ª–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –∂–µ–ª–∞–µ–º–æ–π –∫–∞—Ä—å–µ—Ä–Ω–æ–π —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏, \
–≤–∫–ª—é—á–∞—é—â–∞—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ —Ü–µ–ª–µ–≤—ã—Ö —Ä–æ–ª—è—Ö, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–º –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–µ, —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö –≤–ª–∏—è–Ω–∏—è \
–∏ —Å–ø–æ—Å–æ–±–∞—Ö —Å–æ–∑–¥–∞–Ω–∏—è —Ü–µ–Ω–Ω–æ—Å—Ç–∏. –≠—Ç–æ –Ω–µ –∂—ë—Å—Ç–∫–∏–π –ø–ª–∞–Ω, –∞ –≤–∏–∑–∏–æ–Ω –∏ –Ω–∞–±–æ—Ä –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ \
–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤—ã–±–æ—Ä –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤."""

concept.purpose = """–û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫—É—é —è—Å–Ω–æ—Å—Ç—å –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –∫–∞—Ä—å–µ—Ä–Ω–æ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è. \
–ü–æ–∑–≤–æ–ª—è–µ—Ç –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã, —Ä–æ–ª–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–±–ª–∏–∂–∞—é—Ç –∫ –∂–µ–ª–∞–µ–º–æ–º—É \
—Å–æ—Å—Ç–æ—è–Ω–∏—é. –°–ª—É–∂–∏—Ç –∫—Ä–∏—Ç–µ—Ä–∏–µ–º –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤."""

concept.meta_meta = MetaMetaType.CONCEPT

concept.examples = [
    "–ö–æ–Ω—Ü–µ–ø—Ç: '–Ø ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ —Ñ–∏–Ω—Ç–µ—Ö-–¥–æ–º–µ–Ω–µ'",
    "–ö–æ–Ω—Ü–µ–ø—Ç: '–Ø ‚Äî –º–µ—Ç–æ–¥–æ–ª–æ–≥ –∏ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å –≤ –æ–±–ª–∞—Å—Ç–∏ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è'",
    "–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã —Ä–æ–ª–µ–π —Å —Ü–µ–ª–µ–≤—ã–º–∏ –ø–æ–∑–∏—Ü–∏—è–º–∏ —á–µ—Ä–µ–∑ 3-5-10 –ª–µ—Ç",
]

# 4. –î–æ–±–∞–≤–ª—è–µ–º —Å–≤—è–∑–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å C_2 –∏ C_15)
if onto.index.get("C_2"):
    concept.add_relation("C_2", RelationType.REQUIRES, "–¢—Ä–µ–±—É–µ—Ç –∞–≥–µ–Ω—Ç–Ω–æ—Å—Ç–∏")
    
# 5. –û—Ç–º–µ—á–∞–µ–º –∫–∞–∫ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ
concept.mark_filled()

# 6. –°–æ—Ö—Ä–∞–Ω—è–µ–º
file_path = onto.save_concept(concept)

print(f"‚úÖ –ü–æ–Ω—è—Ç–∏–µ —Å–æ–∑–¥–∞–Ω–æ!")
print(f"   ID: {concept.id}")
print(f"   –ò–º—è: {concept.name}")
print(f"   –°—Ç–∞—Ç—É—Å: {concept.status.value}")
print(f"   –¢–∏–ø: {concept.meta_meta.value}")
print(f"   –§–∞–π–ª: {file_path.name}\n")

# 7. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
onto.load_all()
print("üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–Ω—Ç–æ–ª–æ–≥–∏–∏:")
onto.print_audit()

print("\n" + "="*60)
print("‚ú® –ì–æ—Ç–æ–≤–æ! –§–∞–π–ª —Å–æ–∑–¥–∞–Ω –≤:")
print(f"   {file_path}")
print("="*60)
